/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../mock-server/MockServerPool";
import { ElevenLabsClient } from "../../src/Client";

describe("Studio", () => {
    test("create_podcast", async () => {
        const server = mockServerPool.createServer();
        const client = new ElevenLabsClient({
            apiKey: "test",
            environment: { base: server.baseUrl, wss: server.baseUrl },
        });
        const rawRequestBody = {
            model_id: "eleven_multilingual_v2",
            mode: {
                conversation: { host_voice_id: "aw1NgEzBg83R7vgmiJt6", guest_voice_id: "aw1NgEzBg83R7vgmiJt7" },
                type: "conversation",
            },
            source: { text: "This is a test podcast." },
        };
        const rawResponseBody = {
            project: {
                project_id: "aw1NgEzBg83R7vgmiJt6",
                name: "My Project",
                create_date_unix: 1714204800,
                default_title_voice_id: "JBFqnCBsd6RMkjVDRZzb",
                default_paragraph_voice_id: "JBFqnCBsd6RMkjVDRZzb",
                default_model_id: "eleven_multilingual_v2",
                last_conversion_date_unix: 1714204800,
                can_be_downloaded: true,
                title: "My Project",
                author: "John Doe",
                description: "This is a description of my project.",
                genres: ["Novel", "Short Story"],
                cover_image_url: "https://example.com/cover.jpg",
                target_audience: "young adult",
                language: "en",
                content_type: "Novel",
                original_publication_date: "2025-01-01",
                mature_content: false,
                isbn_number: "978-90-274-3964-2",
                volume_normalization: true,
                state: "default",
                access_level: "viewer",
                fiction: "fiction",
                quality_check_on: false,
                quality_check_on_when_bulk_convert: false,
                creation_meta: { creation_progress: 0.5, status: "pending", type: "blank" },
                source_type: "blank",
                chapters_enabled: true,
            },
        };
        server
            .mockEndpoint()
            .post("/v1/studio/podcasts")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.studio.createPodcast({
            modelId: "eleven_multilingual_v2",
            mode: {
                type: "conversation",
                conversation: {
                    hostVoiceId: "aw1NgEzBg83R7vgmiJt6",
                    guestVoiceId: "aw1NgEzBg83R7vgmiJt7",
                },
            },
            source: {
                text: "This is a test podcast.",
            },
        });
        expect(response).toEqual({
            project: {
                projectId: "aw1NgEzBg83R7vgmiJt6",
                name: "My Project",
                createDateUnix: 1714204800,
                defaultTitleVoiceId: "JBFqnCBsd6RMkjVDRZzb",
                defaultParagraphVoiceId: "JBFqnCBsd6RMkjVDRZzb",
                defaultModelId: "eleven_multilingual_v2",
                lastConversionDateUnix: 1714204800,
                canBeDownloaded: true,
                title: "My Project",
                author: "John Doe",
                description: "This is a description of my project.",
                genres: ["Novel", "Short Story"],
                coverImageUrl: "https://example.com/cover.jpg",
                targetAudience: "young adult",
                language: "en",
                contentType: "Novel",
                originalPublicationDate: "2025-01-01",
                matureContent: false,
                isbnNumber: "978-90-274-3964-2",
                volumeNormalization: true,
                state: "default",
                accessLevel: "viewer",
                fiction: "fiction",
                qualityCheckOn: false,
                qualityCheckOnWhenBulkConvert: false,
                creationMeta: {
                    creationProgress: 0.5,
                    status: "pending",
                    type: "blank",
                },
                sourceType: "blank",
                chaptersEnabled: true,
            },
        });
    });
});
